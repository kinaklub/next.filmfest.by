language: python
sudo: false
python:
  - "2.7"
addons:
  postgresql: "9.4"
services:
  - postgresql
install:
  - pip install tox
  - npm install jsonlint -g
before_script:
  - psql -c 'create database filmfest;' -U postgres
script:
  - echo --- Run JSON linter ---
  - find . -name "*.json" -type f -exec jsonlint -q "{}" \; -exec /bin/echo "{}" \;
  - echo --- Run tests ---
  - tox -e "py27-{sqlite,pg}"
